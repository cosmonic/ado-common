parameters:
  - name: workingDirectory
    type: string
    default: "./"

steps:
  - script: cargo fmt -- --check && cargo clippy
    displayName: Check formatting and clippy
    workingDirectory: ${{ parameters.workingDirectory }}

  - script: cargo test --verbose --doc -- --nocapture
    displayName: Run tests
    workingDirectory: ${{ parameters.workingDirectory }}
